"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{8610:function(e,t,r){r.r(t),r.d(t,{Authorization:function(){return s},AuthorizationDelegatedGrant:function(){return n},AuthorizationOwner:function(){return u},Definitions:function(){return x},EventsGet:function(){return I},GeneralJwk:function(){return C},GeneralJws:function(){return F},GenericSignaturePayload:function(){return em},JwkVerificationMethod:function(){return D},MessagesGet:function(){return R},NumberRangeFilter:function(){return N},PermissionsDefinitions:function(){return V},PermissionsGrant:function(){return E},PermissionsRequest:function(){return K},PermissionsRevoke:function(){return J},PermissionsScopes:function(){return U},ProtocolDefinition:function(){return Q},ProtocolRuleSet:function(){return et},ProtocolsConfigure:function(){return er},ProtocolsQuery:function(){return ea},PublicJwk:function(){return ed},RecordsDelete:function(){return P},RecordsFilter:function(){return ep},RecordsQuery:function(){return w},RecordsRead:function(){return eo},RecordsWrite:function(){return A},RecordsWriteSignaturePayload:function(){return ec},RecordsWriteUnidentified:function(){return Z}});let s=o,a=RegExp("^[A-Za-z0-9_-]+$","u");function i(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:o=e}={}){if(!e||"object"!=typeof e||Array.isArray(e))return i.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;for(let r in e)if(!("payload"===r||"signatures"===r))return i.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(void 0!==e.payload){let r=e.payload;if("string"!=typeof r)return i.errors=[{instancePath:t+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(r))return i.errors=[{instancePath:t+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;var n=!0}else var n=!0;if(n){if(void 0!==e.signatures){let r=e.signatures;if(!Array.isArray(r))return i.errors=[{instancePath:t+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length<1)return i.errors=[{instancePath:t+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let e=r.length;for(let s=0;s<e;s++){let e=r[s];if(!e||"object"!=typeof e||Array.isArray(e))return i.errors=[{instancePath:t+"/signatures/"+s,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==e.protected){let r=e.protected;if("string"!=typeof r)return i.errors=[{instancePath:t+"/signatures/"+s+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(r))return i.errors=[{instancePath:t+"/signatures/"+s+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;var p=!0}else var p=!0;if(p){if(void 0!==e.signature){let r=e.signature;if("string"!=typeof r)return i.errors=[{instancePath:t+"/signatures/"+s+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(r))return i.errors=[{instancePath:t+"/signatures/"+s+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;var p=!0}else var p=!0}}}var n=!0}else var n=!0}return i.errors=null,!0}function o(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let n=null,p=0;if(!e||"object"!=typeof e||Array.isArray(e))return o.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=p;for(let r in e)if("signature"!==r)return o.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;r!==p||void 0===e.signature||i(e.signature,{instancePath:t+"/signature",parentData:e,parentDataProperty:"signature",rootData:a})||(p=(n=null===n?i.errors:n.concat(i.errors)).length)}return o.errors=n,0===p}let n=f,p={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},delegationChain:{description:"the parent grant",$ref:"#"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","dateExpires"],properties:{messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},dateExpires:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},description:{type:"string"},delegated:{type:"boolean"},grantedTo:{description:"DID of the grantee",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo"},grantedBy:{description:"DID of the grantor",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy"},grantedFor:{description:"DID of the DWN to which the grantee is given access",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor"},permissionsRequestId:{description:"CID of an associated PermissionsRequest message",type:"string"},interface:{enum:["Permissions"],type:"string"},method:{enum:["Grant"],type:"string"},scope:{$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/scope"},conditions:{$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions"}}}}},d={properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function m(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0,n=!1,p=null;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.interface){let r=o;if("Protocols"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.method){let r=o;if("Query"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var c=0===o;c&&(n=!0,p=0);let l=o,h=o;if(o===h){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.method){let r=o;if("Read"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol){let e={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.contextId){let r=o;if("string"!=typeof e.contextId){let e={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.protocolPath){let r=o;if("string"!=typeof e.protocolPath){let e={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0}}}}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var c=l===o;if(c&&n)n=!1,p=[p,1];else{c&&(n=!0,p=1);let r=o,s=o;if(o===s){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.method){let r=o;if("Delete"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var c=r===o;if(c&&n)n=!1,p=[p,2];else{c&&(n=!0,p=2);let r=o,s=o;if(o===s){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0;if(u){if(void 0!==e.method){let r=o;if("Write"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0;if(u){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0;if(u){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol){let e={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0;if(u){if(void 0!==e.contextId){let r=o;if("string"!=typeof e.contextId){let e={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0;if(u){if(void 0!==e.protocolPath){let r=o;if("string"!=typeof e.protocolPath){let e={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var u=r===o}else var u=!0}}}}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var c=r===o;c&&n?(n=!1,p=[p,3]):c&&(n=!0,p=3)}}if(n)o=0,null!==i&&(i=null);else{let e={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,m.errors=i,!1}return m.errors=i,0===o}let c=Object.prototype.hasOwnProperty,l=RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u"),h=RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u");function y(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,n=0;if(!e||"object"!=typeof e||Array.isArray(e))return y.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.authorization&&(r="authorization")||void 0===e.descriptor&&(r="descriptor"))return y.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;{let r=n;for(let r in e)if(!("authorization"===r||"delegationChain"===r||"descriptor"===r))return y.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===n){if(void 0!==e.authorization){let r=n;o(e.authorization,{instancePath:t+"/authorization",parentData:e,parentDataProperty:"authorization",rootData:a})||(n=(i=null===i?o.errors:i.concat(o.errors)).length);var f=r===n}else var f=!0;if(f){if(void 0!==e.delegationChain){let r=n;y(e.delegationChain,{instancePath:t+"/delegationChain",parentData:e,parentDataProperty:"delegationChain",rootData:a})||(n=(i=null===i?y.errors:i.concat(y.errors)).length);var f=r===n}else var f=!0;if(f){if(void 0!==e.descriptor){let r=e.descriptor,s=n;if(n===s){if(!r||"object"!=typeof r||Array.isArray(r))return y.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.interface&&(e="interface")||void 0===r.method&&(e="method")||void 0===r.messageTimestamp&&(e="messageTimestamp")||void 0===r.dateExpires&&(e="dateExpires"))return y.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;{let e=n;for(let e in r)if(!c.call(p.properties.descriptor.properties,e))return y.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===n){if(void 0!==r.messageTimestamp){let e=r.messageTimestamp,s=n,a=n;if(n===a){if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return y.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var u=s===n}else var u=!0;if(u){if(void 0!==r.dateExpires){let e=r.dateExpires,s=n,a=n;if(n===a){if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return y.errors=[{instancePath:t+"/descriptor/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var u=s===n}else var u=!0;if(u){if(void 0!==r.description){let e=n;if("string"!=typeof r.description)return y.errors=[{instancePath:t+"/descriptor/description",schemaPath:"#/properties/descriptor/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=e===n}else var u=!0;if(u){if(void 0!==r.delegated){let e=n;if("boolean"!=typeof r.delegated)return y.errors=[{instancePath:t+"/descriptor/delegated",schemaPath:"#/properties/descriptor/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var u=e===n}else var u=!0;if(u){if(void 0!==r.grantedTo){let e=r.grantedTo,s=n,a=n;if(n===a){if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/grantedTo",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(e))return y.errors=[{instancePath:t+"/descriptor/grantedTo",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var u=s===n}else var u=!0;if(u){if(void 0!==r.grantedBy){let e=r.grantedBy,s=n,a=n;if(n===a){if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/grantedBy",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(e))return y.errors=[{instancePath:t+"/descriptor/grantedBy",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var u=s===n}else var u=!0;if(u){if(void 0!==r.grantedFor){let e=r.grantedFor,s=n,a=n;if(n===a){if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/grantedFor",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(e))return y.errors=[{instancePath:t+"/descriptor/grantedFor",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var u=s===n}else var u=!0;if(u){if(void 0!==r.permissionsRequestId){let e=n;if("string"!=typeof r.permissionsRequestId)return y.errors=[{instancePath:t+"/descriptor/permissionsRequestId",schemaPath:"#/properties/descriptor/properties/permissionsRequestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=e===n}else var u=!0;if(u){if(void 0!==r.interface){let e=r.interface,s=n;if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Permissions"!==e)return y.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:p.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==r.method){let e=r.method,s=n;if("string"!=typeof e)return y.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Grant"!==e)return y.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:p.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==r.scope){let e=n;m(r.scope,{instancePath:t+"/descriptor/scope",parentData:r,parentDataProperty:"scope",rootData:a})||(n=(i=null===i?m.errors:i.concat(m.errors)).length);var u=e===n}else var u=!0;if(u){if(void 0!==r.conditions){let e=r.conditions,s=n,a=n;if(n===a){if(!e||"object"!=typeof e||Array.isArray(e))return y.errors=[{instancePath:t+"/descriptor/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=n;for(let r in e)if("publication"!==r)return y.errors=[{instancePath:t+"/descriptor/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===n&&void 0!==e.publication){let r=e.publication;if("string"!=typeof r)return y.errors=[{instancePath:t+"/descriptor/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!("Required"===r||"Prohibited"===r))return y.errors=[{instancePath:t+"/descriptor/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:d.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}}var u=s===n}else var u=!0}}}}}}}}}}}}}}}var f=s===n}else var f=!0}}}}}return y.errors=i,0===n}function f(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let o=null,n=0;if(!e||"object"!=typeof e||Array.isArray(e))return f.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=n;for(let r in e)if(!("signature"===r||"authorDelegatedGrant"===r))return f.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===n){if(void 0!==e.signature){let r=n;i(e.signature,{instancePath:t+"/signature",parentData:e,parentDataProperty:"signature",rootData:a})||(n=(o=null===o?i.errors:o.concat(i.errors)).length);var p=r===n}else var p=!0;if(p){if(void 0!==e.authorDelegatedGrant){let r=n;y(e.authorDelegatedGrant,{instancePath:t+"/authorDelegatedGrant",parentData:e,parentDataProperty:"authorDelegatedGrant",rootData:a})||(n=(o=null===o?y.errors:o.concat(y.errors)).length);var p=r===n}else var p=!0}}}return f.errors=o,0===n}let u=g;function g(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let o=null,n=0;if(!e||"object"!=typeof e||Array.isArray(e))return g.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=n;for(let r in e)if(!("signature"===r||"authorDelegatedGrant"===r||"ownerSignature"===r))return g.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===n){let r;if(void 0!==e.ownerSignature&&void 0===e.signature&&(r="signature"))return g.errors=[{instancePath:t,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:r,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(void 0!==e.signature){let r=n;i(e.signature,{instancePath:t+"/signature",parentData:e,parentDataProperty:"signature",rootData:a})||(n=(o=null===o?i.errors:o.concat(i.errors)).length);var p=r===n}else var p=!0;if(p){if(void 0!==e.authorDelegatedGrant){let r=n;y(e.authorDelegatedGrant,{instancePath:t+"/authorDelegatedGrant",parentData:e,parentDataProperty:"authorDelegatedGrant",rootData:a})||(n=(o=null===o?y.errors:o.concat(y.errors)).length);var p=r===n}else var p=!0;if(p){if(void 0!==e.ownerSignature){let r=n;i(e.ownerSignature,{instancePath:t+"/ownerSignature",parentData:e,parentDataProperty:"ownerSignature",rootData:a})||(n=(o=null===o?i.errors:o.concat(i.errors)).length);var p=r===n}else var p=!0}}}}return g.errors=o,0===n}let P=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=n;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.authorization){let e=n;f(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(n=(o=null===o?f.errors:o.concat(f.errors)).length);var p=e===n}else var p=!0;if(p){if(void 0!==t.descriptor){let s=t.descriptor,a=n;if(n===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.recordId&&(t="recordId"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=n;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"recordId"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===n){if(void 0!==s.interface){let t=s.interface,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:v.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.method){let t=s.method,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Delete"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:v.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=n,i=n;if(n===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var d=a===n}else var d=!0;if(d){if(void 0!==s.recordId){let t=n;if("string"!=typeof s.recordId)return e.errors=[{instancePath:r+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=t===n}else var d=!0}}}}}}}var p=a===n}else var p=!0}}}}return e.errors=o,0===n},v={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},recordId:{type:"string"}}}}},w=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=n;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.authorization){let e=n;f(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(n=(o=null===o?f.errors:o.concat(f.errors)).length);var p=e===n}else var p=!0;if(p){if(void 0!==t.descriptor){let s=t.descriptor,a=n;if(n===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.filter&&(t="filter"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=n;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"filter"===t||"pagination"===t||"dateSort"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===n){if(void 0!==s.interface){let t=s.interface,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:b.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.method){let t=s.method,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Query"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:b.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=n,i=n;if(n===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var d=a===n}else var d=!0;if(d){if(void 0!==s.filter){let e=n;k(s.filter,{instancePath:r+"/descriptor/filter",parentData:s,parentDataProperty:"filter",rootData:i})||(n=(o=null===o?k.errors:o.concat(k.errors)).length);var d=e===n}else var d=!0;if(d){if(void 0!==s.pagination){let t=s.pagination,a=n;if(n===a){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s=n;for(let s in t)if(!("limit"===s||"cursor"===s))return e.errors=[{instancePath:r+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.limit){let s=t.limit,a=n;if(n===a){if(!("number"==typeof s&&isFinite(s)))return e.errors=[{instancePath:r+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;if(s<1||isNaN(s))return e.errors=[{instancePath:r+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}var m=a===n}else var m=!0;if(m){if(void 0!==t.cursor){let s=n;if("string"!=typeof t.cursor)return e.errors=[{instancePath:r+"/descriptor/pagination/cursor",schemaPath:"#/properties/descriptor/properties/pagination/properties/cursor/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=s===n}else var m=!0}}}}var d=a===n}else var d=!0;if(d){if(void 0!==s.dateSort){let t=s.dateSort,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!("createdAscending"===t||"createdDescending"===t||"publishedAscending"===t||"publishedDescending"===t))return e.errors=[{instancePath:r+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:b.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0}}}}}}}}}var p=a===n}else var p=!0}}}}return e.errors=o,0===n},b={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{type:"string"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},j={properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did"},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did"},contextId:{type:"string"},schema:{type:"string"},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function k(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0;if(!e||"object"!=typeof e||Array.isArray(e))return k.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(e).length<1)return k.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let r=o;for(let r in e)if(!c.call(j.properties,r))return k.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===o){if(void 0!==e.datePublished){let r=o,s=o,a=!1,d=null,m=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.published&&(r="published")){let e={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else if(void 0!==e.published&&!0!==e.published){let e={instancePath:t+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:j.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),o++}}var n=m===o;n&&(a=!0,d=0);let c=o,l=o,h=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.published){let e={};null===i?i=[e]:i.push(e),o++}if(h===o){let e={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===i?i=[e]:i.push(e),o++}else o=l,null!==i&&(l?i.length=l:i=null);var n=c===o;if(n&&a?(a=!1,d=[d,1]):n&&(a=!0,d=1),a)o=s,null!==i&&(s?i.length=s:i=null);else{let e={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:d},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,k.errors=i,!1}var p=r===o}else var p=!0;if(p){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol)return k.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.protocolPath){let r=o;if("string"!=typeof e.protocolPath)return k.errors=[{instancePath:t+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.author){let r=e.author,s=o,a=o;if(o===a){if("string"!=typeof r)return k.errors=[{instancePath:t+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(r))return k.errors=[{instancePath:t+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var d=s===o}else var d=!0;if(d){if(void 0!==e.attester){let r=e.attester,s=o,a=o;if(o===a){if("string"!=typeof r)return k.errors=[{instancePath:t+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(r))return k.errors=[{instancePath:t+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var d=s===o}else var d=!0;if(d){if(void 0!==e.recipient){let r=e.recipient,s=o,a=o;if(o===a){if("string"!=typeof r)return k.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(r))return k.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var d=s===o}else var d=!0;if(d){if(void 0!==e.contextId){let r=o;if("string"!=typeof e.contextId)return k.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema)return k.errors=[{instancePath:t+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.recordId){let r=o;if("string"!=typeof e.recordId)return k.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.parentId){let r=o;if("string"!=typeof e.parentId)return k.errors=[{instancePath:t+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.published){let r=o;if("boolean"!=typeof e.published)return k.errors=[{instancePath:t+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.dataFormat){let r=o;if("string"!=typeof e.dataFormat)return k.errors=[{instancePath:t+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.dataSize){let r=e.dataSize,s=o,a=o;if(o===a){if(!r||"object"!=typeof r||Array.isArray(r))return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(r).length<1)return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let e=o;for(let e in r)if(!("gt"===e||"gte"===e||"lt"===e||"lte"===e))return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===o){if(void 0!==r.gt){let e=o,s=o,a=o;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.gte){let e={};null===i?i=[e]:i.push(e),o++}if(a===o)return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;o=s,null!==i&&(s?i.length=s:i=null);var m=e===o}else var m=!0;if(m){if(void 0!==r.gte){let e=o,s=o,a=o;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.gt){let e={};null===i?i=[e]:i.push(e),o++}if(a===o)return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;o=s,null!==i&&(s?i.length=s:i=null);var m=e===o}else var m=!0;if(m){if(void 0!==r.lt){let e=o,s=o,a=o;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.lte){let e={};null===i?i=[e]:i.push(e),o++}if(a===o)return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;o=s,null!==i&&(s?i.length=s:i=null);var m=e===o}else var m=!0;if(m){if(void 0!==r.lte){let e=o,s=o,a=o;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.lt){let e={};null===i?i=[e]:i.push(e),o++}if(a===o)return k.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;o=s,null!==i&&(s?i.length=s:i=null);var m=e===o}else var m=!0;if(m){if(void 0!==r.gt){let e=r.gt,s=o;if(!("number"==typeof e&&isFinite(e)))return k.errors=[{instancePath:t+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var y=s===o}else var y=!0;if(y){if(void 0!==r.gte){let e=r.gte,s=o;if(!("number"==typeof e&&isFinite(e)))return k.errors=[{instancePath:t+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var y=s===o}else var y=!0;if(y){if(void 0!==r.lt){let e=r.lt,s=o;if(!("number"==typeof e&&isFinite(e)))return k.errors=[{instancePath:t+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var y=s===o}else var y=!0;if(y){if(void 0!==r.lte){let e=r.lte,s=o;if(!("number"==typeof e&&isFinite(e)))return k.errors=[{instancePath:t+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var y=s===o}else var y=!0}}}}}}}}}}var d=s===o}else var d=!0;if(d){if(void 0!==e.dataCid){let r=o;if("string"!=typeof e.dataCid)return k.errors=[{instancePath:t+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==e.dateCreated){let r=e.dateCreated,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return k.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(r).length<1)return k.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let e=o;for(let e in r)if(!("from"===e||"to"===e))return k.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===o){if(void 0!==r.from){let e=r.from,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var f=s===o}else var f=!0;if(f){if(void 0!==r.to){let e=r.to,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var f=s===o}else var f=!0}}}}var d=s===o}else var d=!0;if(d){if(void 0!==e.datePublished){let r=e.datePublished,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return k.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(r).length<1)return k.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let e=o;for(let e in r)if(!("from"===e||"to"===e))return k.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===o){if(void 0!==r.from){let e=r.from,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var u=s===o}else var u=!0;if(u){if(void 0!==r.to){let e=r.to,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var u=s===o}else var u=!0}}}}var d=s===o}else var d=!0;if(d){if(void 0!==e.dateUpdated){let r=e.dateUpdated,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return k.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(r).length<1)return k.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let e=o;for(let e in r)if(!("from"===e||"to"===e))return k.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===o){if(void 0!==r.from){let e=r.from,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var g=s===o}else var g=!0;if(g){if(void 0!==r.to){let e=r.to,s=o,a=o;if(o===a){if("string"!=typeof e)return k.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return k.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var g=s===o}else var g=!0}}}}var d=s===o}else var d=!0}}}}}}}}}}}}}}}}}}return k.errors=i,0===o}let A=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if($(t,{instancePath:r,parentData:s,parentDataProperty:a,rootData:i})){let s=n;if(n===s){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/allOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.recordId&&(s="recordId")||void 0===t.authorization&&(s="authorization"))return e.errors=[{instancePath:r,schemaPath:"#/allOf/0/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1}}}else n=(o=null===o?$.errors:o.concat($.errors)).length;return e.errors=o,0===n},z={properties:{recordId:{type:"string"},contextId:{type:"string"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}}},q={properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}}};function T(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0,n=!1,p=null;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.crv&&(r="crv")||void 0===e.x&&(r="x")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.kty){let r=o;if("EC"!==e.kty){let e={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.crv){let r=o;if("string"!=typeof e.crv){let e={instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.x){let r=o;if("string"!=typeof e.x){let e={instancePath:t+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.y){let r=o;if("string"!=typeof e.y){let e={instancePath:t+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.d){let r=o;if("string"!=typeof e.d){let e={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0}}}}}}var m=0===o;m&&(n=!0,p=0);let c=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.crv&&(r="crv")||void 0===e.x&&(r="x")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.kty){let r=o;if("OKP"!==e.kty){let e={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var l=r===o}else var l=!0;if(l){if(void 0!==e.crv){let r=o;if("string"!=typeof e.crv){let e={instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var l=r===o}else var l=!0;if(l){if(void 0!==e.x){let r=o;if("string"!=typeof e.x){let e={instancePath:t+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var l=r===o}else var l=!0;if(l){if(void 0!==e.d){let r=o;if("string"!=typeof e.d){let e={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var l=r===o}else var l=!0}}}}}var m=c===o;if(m&&n)n=!1,p=[p,1];else{m&&(n=!0,p=1);let r=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.n&&(r="n")||void 0===e.e&&(r="e")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.kty){let r=o;if("RSA"!==e.kty){let e={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.n){let r=o;if("string"!=typeof e.n){let e={instancePath:t+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.e){let r=o;if("string"!=typeof e.e){let e={instancePath:t+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.d){let r=o;if("string"!=typeof e.d){let e={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.p){let r=o;if("string"!=typeof e.p){let e={instancePath:t+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.q){let r=o;if("string"!=typeof e.q){let e={instancePath:t+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.dp){let r=o;if("string"!=typeof e.dp){let e={instancePath:t+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.dq){let r=o;if("string"!=typeof e.dq){let e={instancePath:t+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.qi){let r=o;if("string"!=typeof e.qi){let e={instancePath:t+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.oth){let r=e.oth,s=o;if(!(r&&"object"==typeof r&&!Array.isArray(r))){let e={instancePath:t+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var h=s===o}else var h=!0}}}}}}}}}}}var m=r===o;if(m&&n)n=!1,p=[p,2];else{m&&(n=!0,p=2);let r=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.k&&(r="k")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.kty){let r=o;if("oct"!==e.kty){let e={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.k){let r=o;if("string"!=typeof e.k){let e={instancePath:t+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0}}}var m=r===o;m&&n?(n=!1,p=[p,3]):m&&(n=!0,p=3)}}if(n)o=0,null!==i&&(i=null);else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,T.errors=i,!1}if(0===o){if(!e||"object"!=typeof e||Array.isArray(e))return T.errors=[{instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.kty&&(r="kty"))return T.errors=[{instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;if(void 0!==e.alg){let r=o;if("string"!=typeof e.alg)return T.errors=[{instancePath:t+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.kid){let r=o;if("string"!=typeof e.kid)return T.errors=[{instancePath:t+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.kty){let r=e.kty,s=o;if(!("EC"===r||"RSA"===r||"oct"===r||"OKP"===r))return T.errors=[{instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:q.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var f=s===o}else var f=!0;if(f){if(void 0!==e.crv){let r=o;if("string"!=typeof e.crv)return T.errors=[{instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.use){let r=o;if("string"!=typeof e.use)return T.errors=[{instancePath:t+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.key_ops){let r=o;if("string"!=typeof e.key_ops)return T.errors=[{instancePath:t+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.x5u){let r=o;if("string"!=typeof e.x5u)return T.errors=[{instancePath:t+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.x5c){let r=o;if("string"!=typeof e.x5c)return T.errors=[{instancePath:t+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e.x5t){let r=o;if("string"!=typeof e.x5t)return T.errors=[{instancePath:t+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0;if(f){if(void 0!==e["x5t#S256"]){let r=o;if("string"!=typeof e["x5t#S256"])return T.errors=[{instancePath:t+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===o}else var f=!0}}}}}}}}}}}if(0===o){let r=o,s=o,a=o,n=!1,p=o,d=o,m=!1,c=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.d){let e={};null===i?i=[e]:i.push(e),o++}var u=c===o;if(m=m||u)o=d,null!==i&&(d?i.length=d:i=null);else{let e={};null===i?i=[e]:i.push(e),o++}if(o===p){if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.kty&&"EC"!==e.kty){let e={};null===i?i=[e]:i.push(e),o++}}else{let e={};null===i?i=[e]:i.push(e),o++}}var g=p===o;if(!(n=n||g)){let t=o,r=o,s=!1,a=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.d){let e={};null===i?i=[e]:i.push(e),o++}var P=a===o;if(s=s||P)o=r,null!==i&&(r?i.length=r:i=null);else{let e={};null===i?i=[e]:i.push(e),o++}if(o===t){if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.kty&&"OKP"!==e.kty){let e={};null===i?i=[e]:i.push(e),o++}}else{let e={};null===i?i=[e]:i.push(e),o++}}var g=t===o;if(!(n=n||g)){let t=o,r=o,s=!1,a=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.d){let e={};null===i?i=[e]:i.push(e),o++}var v=a===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.p){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.q){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.dp){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.dq){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.qi){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;if(!(s=s||v)){let t=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.oth){let e={};null===i?i=[e]:i.push(e),o++}var v=t===o;s=s||v}}}}}}if(s)o=r,null!==i&&(r?i.length=r:i=null);else{let e={};null===i?i=[e]:i.push(e),o++}if(o===t){if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.kty){let t=o;if("RSA"!==e.kty){let e={};null===i?i=[e]:i.push(e),o++}var w=t===o}else var w=!0;if(w){if(void 0!==e.oth){let t=e.oth,r=o;if(!(t&&"object"==typeof t&&!Array.isArray(t))){let e={};null===i?i=[e]:i.push(e),o++}var w=r===o}else var w=!0}}else{let e={};null===i?i=[e]:i.push(e),o++}}var g=t===o;n=n||g}}if(n)o=a,null!==i&&(a?i.length=a:i=null);else{let e={};null===i?i=[e]:i.push(e),o++}if(s===o)return T.errors=[{instancePath:t,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;o=r,null!==i&&(r?i.length=r:i=null)}return T.errors=i,0===o}let O=RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u");function $(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:o=e}={}){let n=null,p=0,d=!1;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.contextId&&(r="contextId")){let e={instancePath:t,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===n?n=[e]:n.push(e),p++}else if(void 0!==e.descriptor){let r=e.descriptor,s=p;if(p===s){if(r&&"object"==typeof r&&!Array.isArray(r)){let e;if(void 0===r.protocol&&(e="protocol")||void 0===r.protocolPath&&(e="protocolPath")){let r={instancePath:t+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===n?n=[r]:n.push(r),p++}}else{let e={instancePath:t+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===n?n=[e]:n.push(e),p++}}}}var m=0===p;if(!(d=d||m)){let r=p,s=p,a=p,i=p;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.contextId){let e={};null===n?n=[e]:n.push(e),p++}if(i===p){let e={instancePath:t,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=a,null!==n&&(a?n.length=a:n=null);var y=s===p;if(y){let r=p;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.descriptor){let r=e.descriptor;if(!(r&&"object"==typeof r&&!Array.isArray(r))){let e={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===n?n=[e]:n.push(e),p++}let s=p,a=p;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.protocol){let e={};null===n?n=[e]:n.push(e),p++}if(a===p){let e={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=s,null!==n&&(s?n.length=s:n=null)}var y=r===p;if(y){let r=p;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.descriptor){let r=e.descriptor;if(!(r&&"object"==typeof r&&!Array.isArray(r))){let e={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===n?n=[e]:n.push(e),p++}let s=p,a=p;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.protocolPath){let e={};null===n?n=[e]:n.push(e),p++}if(a===p){let e={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=s,null!==n&&(s?n.length=s:n=null)}var y=r===p}}var m=r===p;d=d||m}if(d)p=0,null!==n&&(n=null);else{let e={instancePath:t,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===n?n=[e]:n.push(e),p++,$.errors=n,!1}if(0===p){if(!e||"object"!=typeof e||Array.isArray(e))return $.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.descriptor&&(r="descriptor"))return $.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;{let r=p;for(let r in e)if(!("recordId"===r||"contextId"===r||"attestation"===r||"authorization"===r||"encryption"===r||"descriptor"===r))return $.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===p){if(void 0!==e.recordId){let r=p;if("string"!=typeof e.recordId)return $.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===p}else var f=!0;if(f){if(void 0!==e.contextId){let r=p;if("string"!=typeof e.contextId)return $.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=r===p}else var f=!0;if(f){if(void 0!==e.attestation){let r=p;i(e.attestation,{instancePath:t+"/attestation",parentData:e,parentDataProperty:"attestation",rootData:o})||(p=(n=null===n?i.errors:n.concat(i.errors)).length);var f=r===p}else var f=!0;if(f){if(void 0!==e.authorization){let r=p;g(e.authorization,{instancePath:t+"/authorization",parentData:e,parentDataProperty:"authorization",rootData:o})||(p=(n=null===n?g.errors:n.concat(g.errors)).length);var f=r===p}else var f=!0;if(f){if(void 0!==e.encryption){let r=e.encryption,s=p;if(p===s){if(!r||"object"!=typeof r||Array.isArray(r))return $.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.algorithm&&(e="algorithm")||void 0===r.initializationVector&&(e="initializationVector")||void 0===r.keyEncryption&&(e="keyEncryption"))return $.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;{let e=p;for(let e in r)if(!("algorithm"===e||"initializationVector"===e||"keyEncryption"===e))return $.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p){if(void 0!==r.algorithm){let e=r.algorithm,s=p;if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("A256CTR"!==e)return $.errors=[{instancePath:t+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:z.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var u=s===p}else var u=!0;if(u){if(void 0!==r.initializationVector){let e=r.initializationVector,s=p,i=p;if(p===i){if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(e))return $.errors=[{instancePath:t+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}var u=s===p}else var u=!0;if(u){if(void 0!==r.keyEncryption){let e=r.keyEncryption,s=p;if(p===s){if(!Array.isArray(e))return $.errors=[{instancePath:t+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(e.length<1)return $.errors=[{instancePath:t+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var P=!0;let r=e.length;for(let s=0;s<r;s++){let r=e[s],i=p;if(p===i){if(!r||"object"!=typeof r||Array.isArray(r))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.rootKeyId&&(e="rootKeyId")||void 0===r.derivationScheme&&(e="derivationScheme")||void 0===r.algorithm&&(e="algorithm")||void 0===r.encryptedKey&&(e="encryptedKey")||void 0===r.initializationVector&&(e="initializationVector")||void 0===r.ephemeralPublicKey&&(e="ephemeralPublicKey")||void 0===r.messageAuthenticationCode&&(e="messageAuthenticationCode"))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;{let e=p;for(let e in r)if(!("rootKeyId"===e||"derivationScheme"===e||"derivedPublicKey"===e||"algorithm"===e||"encryptedKey"===e||"initializationVector"===e||"ephemeralPublicKey"===e||"messageAuthenticationCode"===e))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p){if(void 0!==r.rootKeyId){let e=p;if("string"!=typeof r.rootKeyId)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=e===p}else var v=!0;if(v){if(void 0!==r.derivationScheme){let e=r.derivationScheme,a=p;if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!("dataFormats"===e||"protocolContext"===e||"protocolPath"===e||"schemas"===e))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:z.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;var v=a===p}else var v=!0;if(v){if(void 0!==r.derivedPublicKey){let e=p;T(r.derivedPublicKey,{instancePath:t+"/encryption/keyEncryption/"+s+"/derivedPublicKey",parentData:r,parentDataProperty:"derivedPublicKey",rootData:o})||(p=(n=null===n?T.errors:n.concat(T.errors)).length);var v=e===p}else var v=!0;if(v){if(void 0!==r.algorithm){let e=r.algorithm,a=p;if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("ECIES-ES256K"!==e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:z.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var v=a===p}else var v=!0;if(v){if(void 0!==r.encryptedKey){let e=r.encryptedKey,i=p,o=p;if(p===o){if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(e))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}var v=i===p}else var v=!0;if(v){if(void 0!==r.initializationVector){let e=r.initializationVector,i=p,o=p;if(p===o){if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(e))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}var v=i===p}else var v=!0;if(v){if(void 0!==r.ephemeralPublicKey){let e=p;T(r.ephemeralPublicKey,{instancePath:t+"/encryption/keyEncryption/"+s+"/ephemeralPublicKey",parentData:r,parentDataProperty:"ephemeralPublicKey",rootData:o})||(p=(n=null===n?T.errors:n.concat(T.errors)).length);var v=e===p}else var v=!0;if(v){if(void 0!==r.messageAuthenticationCode){let e=r.messageAuthenticationCode,i=p,o=p;if(p===o){if("string"!=typeof e)return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!a.test(e))return $.errors=[{instancePath:t+"/encryption/keyEncryption/"+s+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}var v=i===p}else var v=!0}}}}}}}}}}}var P=i===p;if(!P)break}}}var u=s===p}else var u=!0}}}}}}var f=s===p}else var f=!0;if(f){if(void 0!==e.descriptor){let r=e.descriptor,s=p,a=p,i=!1,o=p;if(r&&"object"==typeof r&&!Array.isArray(r)){let e;if(void 0===r.published&&(e="published")||void 0===r.datePublished&&(e="datePublished")){let r={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===n?n=[r]:n.push(r),p++}else if(void 0!==r.published){let e=r.published;if("boolean"!=typeof e){let e={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===n?n=[e]:n.push(e),p++}if(!0!==e){let e={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:z.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};null===n?n=[e]:n.push(e),p++}}}var w=o===p;if(!(i=i||w)){let e=p,s=p,a=p;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.datePublished){let e={};null===n?n=[e]:n.push(e),p++}if(a===p){let e={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=s,null!==n&&(s?n.length=s:n=null);if(p===e&&r&&"object"==typeof r&&!Array.isArray(r)&&void 0!==r.published){let e=r.published;if("boolean"!=typeof e){let e={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===n?n=[e]:n.push(e),p++}if(!1!==e){let e={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:z.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};null===n?n=[e]:n.push(e),p++}}var w=e===p;if(!(i=i||w)){let e=p,s=p,a=p,o=p;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.published){let e={};null===n?n=[e]:n.push(e),p++}if(o===p){let e={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=a,null!==n&&(a?n.length=a:n=null);var b=s===p;if(b){let e=p,s=p,a=p;if(r&&"object"==typeof r&&!Array.isArray(r)&&void 0===r.datePublished){let e={};null===n?n=[e]:n.push(e),p++}if(a===p){let e={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===n?n=[e]:n.push(e),p++}else p=s,null!==n&&(s?n.length=s:n=null);var b=e===p}var w=e===p;i=i||w}}if(i)p=a,null!==n&&(a?n.length=a:n=null);else{let e={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===n?n=[e]:n.push(e),p++,$.errors=n,!1}if(p===s){if(!r||"object"!=typeof r||Array.isArray(r))return $.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e;if(void 0===r.interface&&(e="interface")||void 0===r.method&&(e="method")||void 0===r.dataCid&&(e="dataCid")||void 0===r.dataSize&&(e="dataSize")||void 0===r.dateCreated&&(e="dateCreated")||void 0===r.messageTimestamp&&(e="messageTimestamp")||void 0===r.dataFormat&&(e="dataFormat"))return $.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"}],!1;{let e=p;for(let e in r)if(!c.call(z.properties.descriptor.properties,e))return $.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===p){let e;if(void 0!==r.parentId&&void 0===r.protocol&&(e="protocol"))return $.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:e,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(void 0!==r.interface){let e=r.interface,s=p;if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==e)return $.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:z.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var j=s===p}else var j=!0;if(j){if(void 0!==r.method){let e=r.method,s=p;if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Write"!==e)return $.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:z.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var j=s===p}else var j=!0;if(j){if(void 0!==r.recipient){let e=r.recipient,s=p,a=p;if(p===a){if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(e))return $.errors=[{instancePath:t+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var j=s===p}else var j=!0;if(j){if(void 0!==r.protocol){let e=p;if("string"!=typeof r.protocol)return $.errors=[{instancePath:t+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=e===p}else var j=!0;if(j){if(void 0!==r.protocolPath){let e=r.protocolPath,s=p;if(p===s){if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!O.test(e))return $.errors=[{instancePath:t+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}var j=s===p}else var j=!0;if(j){if(void 0!==r.schema){let e=p;if("string"!=typeof r.schema)return $.errors=[{instancePath:t+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=e===p}else var j=!0;if(j){if(void 0!==r.parentId){let e=p;if("string"!=typeof r.parentId)return $.errors=[{instancePath:t+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=e===p}else var j=!0;if(j){if(void 0!==r.dataCid){let e=p;if("string"!=typeof r.dataCid)return $.errors=[{instancePath:t+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=e===p}else var j=!0;if(j){if(void 0!==r.dataSize){let e=r.dataSize,s=p;if(!("number"==typeof e&&isFinite(e)))return $.errors=[{instancePath:t+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var j=s===p}else var j=!0;if(j){if(void 0!==r.dateCreated){let e=r.dateCreated,s=p,a=p;if(p===a){if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return $.errors=[{instancePath:t+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var j=s===p}else var j=!0;if(j){if(void 0!==r.messageTimestamp){let e=r.messageTimestamp,s=p,a=p;if(p===a){if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return $.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var j=s===p}else var j=!0;if(j){if(void 0!==r.published){let e=p;if("boolean"!=typeof r.published)return $.errors=[{instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var j=e===p}else var j=!0;if(j){if(void 0!==r.datePublished){let e=r.datePublished,s=p,a=p;if(p===a){if("string"!=typeof e)return $.errors=[{instancePath:t+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(e))return $.errors=[{instancePath:t+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var j=s===p}else var j=!0;if(j){if(void 0!==r.dataFormat){let e=p;if("string"!=typeof r.dataFormat)return $.errors=[{instancePath:t+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=e===p}else var j=!0}}}}}}}}}}}}}}}}}var f=s===p}else var f=!0}}}}}}}}}return $.errors=n,0===p}let Z=$,I=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var d=e===p}else var d=!0;if(d){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"watermark"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Events"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:_.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Get"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:_.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.messageTimestamp){let t=p;if("string"!=typeof s.messageTimestamp)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=t===p}else var m=!0;if(m){if(void 0!==s.watermark){let t=p;if("string"!=typeof s.watermark)return e.errors=[{instancePath:r+"/descriptor/watermark",schemaPath:"#/properties/descriptor/properties/watermark/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=t===p}else var m=!0}}}}}}}var d=a===p}else var d=!0}}}}return e.errors=n,0===p},_={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{type:"string"},watermark:{type:"string"}}}}},x=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){return t&&"object"==typeof t&&!Array.isArray(t)?(e.errors=null,!0):(e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)},C=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0,p=!1,d=null;if(t&&"object"==typeof t&&!Array.isArray(t)){let e;if(void 0===t.crv&&(e="crv")||void 0===t.x&&(e="x")){let t={instancePath:r,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===o?o=[t]:o.push(t),n++}else{if(void 0!==t.kty){let e=n;if("EC"!==t.kty){let e={instancePath:r+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};null===o?o=[e]:o.push(e),n++}var m=e===n}else var m=!0;if(m){if(void 0!==t.crv){let e=n;if("string"!=typeof t.crv){let e={instancePath:r+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var m=e===n}else var m=!0;if(m){if(void 0!==t.x){let e=n;if("string"!=typeof t.x){let e={instancePath:r+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var m=e===n}else var m=!0;if(m){if(void 0!==t.y){let e=n;if("string"!=typeof t.y){let e={instancePath:r+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var m=e===n}else var m=!0;if(m){if(void 0!==t.d){let e=n;if("string"!=typeof t.d){let e={instancePath:r+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var m=e===n}else var m=!0}}}}}}var c=0===n;c&&(p=!0,d=0);let l=n;if(t&&"object"==typeof t&&!Array.isArray(t)){let e;if(void 0===t.crv&&(e="crv")||void 0===t.x&&(e="x")){let t={instancePath:r,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===o?o=[t]:o.push(t),n++}else{if(void 0!==t.kty){let e=n;if("OKP"!==t.kty){let e={instancePath:r+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};null===o?o=[e]:o.push(e),n++}var h=e===n}else var h=!0;if(h){if(void 0!==t.crv){let e=n;if("string"!=typeof t.crv){let e={instancePath:r+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var h=e===n}else var h=!0;if(h){if(void 0!==t.x){let e=n;if("string"!=typeof t.x){let e={instancePath:r+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var h=e===n}else var h=!0;if(h){if(void 0!==t.d){let e=n;if("string"!=typeof t.d){let e={instancePath:r+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var h=e===n}else var h=!0}}}}}var c=l===n;if(c&&p)p=!1,d=[d,1];else{c&&(p=!0,d=1);let e=n;if(t&&"object"==typeof t&&!Array.isArray(t)){let e;if(void 0===t.n&&(e="n")||void 0===t.e&&(e="e")){let t={instancePath:r,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===o?o=[t]:o.push(t),n++}else{if(void 0!==t.kty){let e=n;if("RSA"!==t.kty){let e={instancePath:r+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.n){let e=n;if("string"!=typeof t.n){let e={instancePath:r+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.e){let e=n;if("string"!=typeof t.e){let e={instancePath:r+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.d){let e=n;if("string"!=typeof t.d){let e={instancePath:r+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.p){let e=n;if("string"!=typeof t.p){let e={instancePath:r+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.q){let e=n;if("string"!=typeof t.q){let e={instancePath:r+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.dp){let e=n;if("string"!=typeof t.dp){let e={instancePath:r+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.dq){let e=n;if("string"!=typeof t.dq){let e={instancePath:r+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.qi){let e=n;if("string"!=typeof t.qi){let e={instancePath:r+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var y=e===n}else var y=!0;if(y){if(void 0!==t.oth){let e=t.oth,s=n;if(!(e&&"object"==typeof e&&!Array.isArray(e))){let e={instancePath:r+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[e]:o.push(e),n++}var y=s===n}else var y=!0}}}}}}}}}}}var c=e===n;if(c&&p)p=!1,d=[d,2];else{c&&(p=!0,d=2);let e=n;if(t&&"object"==typeof t&&!Array.isArray(t)){let e;if(void 0===t.k&&(e="k")){let t={instancePath:r,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:e},message:"must have required property '"+e+"'"};null===o?o=[t]:o.push(t),n++}else{if(void 0!==t.kty){let e=n;if("oct"!==t.kty){let e={instancePath:r+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};null===o?o=[e]:o.push(e),n++}var f=e===n}else var f=!0;if(f){if(void 0!==t.k){let e=n;if("string"!=typeof t.k){let e={instancePath:r+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[e]:o.push(e),n++}var f=e===n}else var f=!0}}}var c=e===n;c&&p?(p=!1,d=[d,3]):c&&(p=!0,d=3)}}if(p)n=0,null!==o&&(o=null);else{let t={instancePath:r,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:d},message:"must match exactly one schema in oneOf"};return null===o?o=[t]:o.push(t),n++,e.errors=o,!1}if(0===n){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.kty&&(s="kty"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;if(void 0!==t.alg){let s=n;if("string"!=typeof t.alg)return e.errors=[{instancePath:r+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.kid){let s=n;if("string"!=typeof t.kid)return e.errors=[{instancePath:r+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.kty){let s=t.kty,a=n;if(!("EC"===s||"RSA"===s||"oct"===s||"OKP"===s))return e.errors=[{instancePath:r+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:q.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;var u=a===n}else var u=!0;if(u){if(void 0!==t.crv){let s=n;if("string"!=typeof t.crv)return e.errors=[{instancePath:r+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.use){let s=n;if("string"!=typeof t.use)return e.errors=[{instancePath:r+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.key_ops){let s=n;if("string"!=typeof t.key_ops)return e.errors=[{instancePath:r+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.x5u){let s=n;if("string"!=typeof t.x5u)return e.errors=[{instancePath:r+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.x5c){let s=n;if("string"!=typeof t.x5c)return e.errors=[{instancePath:r+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t.x5t){let s=n;if("string"!=typeof t.x5t)return e.errors=[{instancePath:r+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0;if(u){if(void 0!==t["x5t#S256"]){let s=n;if("string"!=typeof t["x5t#S256"])return e.errors=[{instancePath:r+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=s===n}else var u=!0}}}}}}}}}}}return e.errors=o,0===n},F=i,D=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.id&&(s="id")||void 0===t.type&&(s="type")||void 0===t.controller&&(s="controller")||void 0===t.publicKeyJwk&&(s="publicKeyJwk"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=n;for(let s in t)if(!("id"===s||"type"===s||"controller"===s||"publicKeyJwk"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.id){let s=n;if("string"!=typeof t.id)return e.errors=[{instancePath:r+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=s===n}else var p=!0;if(p){if(void 0!==t.type){let s=n;if("JsonWebKey2020"!==t.type)return e.errors=[{instancePath:r+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue:"JsonWebKey2020"},message:"must be equal to constant"}],!1;var p=s===n}else var p=!0;if(p){if(void 0!==t.controller){let s=t.controller,a=n,i=n;if(n===i){if("string"!=typeof s)return e.errors=[{instancePath:r+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(s))return e.errors=[{instancePath:r+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var p=a===n}else var p=!0;if(p){if(void 0!==t.publicKeyJwk){let e=n;T(t.publicKeyJwk,{instancePath:r+"/publicKeyJwk",parentData:t,parentDataProperty:"publicKeyJwk",rootData:i})||(n=(o=null===o?T.errors:o.concat(T.errors)).length);var p=e===n}else var p=!0}}}}}}return e.errors=o,0===n},R=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var d=e===p}else var d=!0;if(d){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"messageCids"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Messages"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:S.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Get"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:S.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var m=a===p}else var m=!0;if(m){if(void 0!==s.messageCids){let t=s.messageCids,a=p;if(p===a){if(!Array.isArray(t))return e.errors=[{instancePath:r+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(t.length<1)return e.errors=[{instancePath:r+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var c=!0;let s=t.length;for(let a=0;a<s;a++){let s=p;if("string"!=typeof t[a])return e.errors=[{instancePath:r+"/descriptor/messageCids/"+a,schemaPath:"#/properties/descriptor/properties/messageCids/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=s===p;if(!c)break}}}var m=a===p}else var m=!0}}}}}}}var d=a===p}else var d=!0}}}}return e.errors=n,0===p},S={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},messageCids:{type:"array",items:{type:"string"},minItems:1}}}}},N=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(t).length<1)return e.errors=[{instancePath:r,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let s=n;for(let s in t)if(!("gt"===s||"gte"===s||"lt"===s||"lte"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.gt){let s=n,a=n,i=n;if(t&&"object"==typeof t&&!Array.isArray(t)&&void 0===t.gte){let e={};null===o?o=[e]:o.push(e),n++}if(i===n)return e.errors=[{instancePath:r,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;n=a,null!==o&&(a?o.length=a:o=null);var p=s===n}else var p=!0;if(p){if(void 0!==t.gte){let s=n,a=n,i=n;if(t&&"object"==typeof t&&!Array.isArray(t)&&void 0===t.gt){let e={};null===o?o=[e]:o.push(e),n++}if(i===n)return e.errors=[{instancePath:r,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;n=a,null!==o&&(a?o.length=a:o=null);var p=s===n}else var p=!0;if(p){if(void 0!==t.lt){let s=n,a=n,i=n;if(t&&"object"==typeof t&&!Array.isArray(t)&&void 0===t.lte){let e={};null===o?o=[e]:o.push(e),n++}if(i===n)return e.errors=[{instancePath:r,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;n=a,null!==o&&(a?o.length=a:o=null);var p=s===n}else var p=!0;if(p){if(void 0!==t.lte){let s=n,a=n,i=n;if(t&&"object"==typeof t&&!Array.isArray(t)&&void 0===t.lt){let e={};null===o?o=[e]:o.push(e),n++}if(i===n)return e.errors=[{instancePath:r,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;n=a,null!==o&&(a?o.length=a:o=null);var p=s===n}else var p=!0;if(p){if(void 0!==t.gt){let s=t.gt,a=n;if(!("number"==typeof s&&isFinite(s)))return e.errors=[{instancePath:r+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==t.gte){let s=t.gte,a=n;if(!("number"==typeof s&&isFinite(s)))return e.errors=[{instancePath:r+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==t.lt){let s=t.lt,a=n;if(!("number"==typeof s&&isFinite(s)))return e.errors=[{instancePath:r+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==t.lte){let s=t.lte,a=n;if(!("number"==typeof s&&isFinite(s)))return e.errors=[{instancePath:r+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=a===n}else var d=!0}}}}}}}}}return e.errors=o,0===n},V=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){return t&&"object"==typeof t&&!Array.isArray(t)?(e.errors=null,!0):(e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)},E=y,K=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var m=e===p}else var m=!0;if(m){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.grantedBy&&(t="grantedBy")||void 0===s.grantedTo&&(t="grantedTo")||void 0===s.grantedFor&&(t="grantedFor")||void 0===s.scope&&(t="scope"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!c.call(G.properties.descriptor.properties,t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Permissions"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:G.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=a===p}else var y=!0;if(y){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Request"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:G.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var y=a===p}else var y=!0;if(y){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var y=a===p}else var y=!0;if(y){if(void 0!==s.description){let t=p;if("string"!=typeof s.description)return e.errors=[{instancePath:r+"/descriptor/description",schemaPath:"#/properties/descriptor/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=t===p}else var y=!0;if(y){if(void 0!==s.grantedTo){let t=s.grantedTo,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/grantedTo",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(t))return e.errors=[{instancePath:r+"/descriptor/grantedTo",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var y=a===p}else var y=!0;if(y){if(void 0!==s.grantedBy){let t=s.grantedBy,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/grantedBy",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(t))return e.errors=[{instancePath:r+"/descriptor/grantedBy",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var y=a===p}else var y=!0;if(y){if(void 0!==s.grantedFor){let t=s.grantedFor,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/grantedFor",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(t))return e.errors=[{instancePath:r+"/descriptor/grantedFor",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var y=a===p}else var y=!0;if(y){if(void 0!==s.scope){let e=p;B(s.scope,{instancePath:r+"/descriptor/scope",parentData:s,parentDataProperty:"scope",rootData:i})||(p=(n=null===n?B.errors:n.concat(B.errors)).length);var y=e===p}else var y=!0;if(y){if(void 0!==s.conditions){let t=s.conditions,a=p,i=p;if(p===i){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r+"/descriptor/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s=p;for(let s in t)if("publication"!==s)return e.errors=[{instancePath:r+"/descriptor/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p&&void 0!==t.publication){let s=t.publication;if("string"!=typeof s)return e.errors=[{instancePath:r+"/descriptor/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!("Required"===s||"Prohibited"===s))return e.errors=[{instancePath:r+"/descriptor/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:d.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}}var y=a===p}else var y=!0}}}}}}}}}}}}var m=a===p}else var m=!0}}}}return e.errors=n,0===p},G={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","grantedBy","grantedTo","grantedFor","scope"],properties:{interface:{enum:["Permissions"],type:"string"},method:{enum:["Request"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},description:{type:"string"},grantedTo:{description:"DID of the grantee",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedTo"},grantedBy:{description:"DID of the grantor",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedBy"},grantedFor:{description:"DID of the DWN to which the grantee is given access",$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/grantedFor"},scope:{$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/scope"},conditions:{$ref:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/definitions/conditions"}}}}};function B(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0,n=!1,p=null;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.interface){let r=o;if("Protocols"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0;if(d){if(void 0!==e.method){let r=o;if("Query"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var d=r===o}else var d=!0}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}var m=0===o;m&&(n=!0,p=0);let c=o,l=o;if(o===l){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.method){let r=o;if("Read"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol){let e={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.contextId){let r=o;if("string"!=typeof e.contextId){let e={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0;if(h){if(void 0!==e.protocolPath){let r=o;if("string"!=typeof e.protocolPath){let e={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var h=r===o}else var h=!0}}}}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var m=c===o;if(m&&n)n=!1,p=[p,1];else{m&&(n=!0,p=1);let r=o,s=o;if(o===s){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.method){let r=o;if("Delete"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0;if(y){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var y=r===o}else var y=!0}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var m=r===o;if(m&&n)n=!1,p=[p,2];else{m&&(n=!0,p=2);let r=o,s=o;if(o===s){if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.interface&&(r="interface")||void 0===e.method&&(r="method")){let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.interface){let r=o;if("Records"!==e.interface){let e={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.method){let r=o;if("Write"!==e.method){let e={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.schema){let r=o;if("string"!=typeof e.schema){let e={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol){let e={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.contextId){let r=o;if("string"!=typeof e.contextId){let e={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0;if(f){if(void 0!==e.protocolPath){let r=o;if("string"!=typeof e.protocolPath){let e={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var f=r===o}else var f=!0}}}}}}}else{let e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/definitions/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===i?i=[e]:i.push(e),o++}}var m=r===o;m&&n?(n=!1,p=[p,3]):m&&(n=!0,p=3)}}if(n)o=0,null!==i&&(i=null);else{let e={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,B.errors=i,!1}return B.errors=i,0===o}let J=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var d=e===p}else var d=!0;if(d){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.permissionsGrantId&&(t="permissionsGrantId"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!("messageTimestamp"===t||"permissionsGrantId"===t||"interface"===t||"method"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var m=a===p}else var m=!0;if(m){if(void 0!==s.permissionsGrantId){let t=p;if("string"!=typeof s.permissionsGrantId)return e.errors=[{instancePath:r+"/descriptor/permissionsGrantId",schemaPath:"#/properties/descriptor/properties/permissionsGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=t===p}else var m=!0;if(m){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Permissions"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:W.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Revoke"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:W.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0}}}}}}}var d=a===p}else var d=!0}}}}return e.errors=n,0===p},W={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","permissionsGrantId"],properties:{messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},permissionsGrantId:{type:"string"},interface:{enum:["Permissions"],type:"string"},method:{enum:["Revoke"],type:"string"}}}}},U=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){return t&&"object"==typeof t&&!Array.isArray(t)?(e.errors=null,!0):(e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)},Q=ee,M=RegExp(".*","u"),H={properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"string",enum:["delete","read","update","write"]}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a record with either $globalRole or $contextRole set to true",type:"string"},can:{type:"string",enum:["delete","query","read","update","write"]}}}]}},$globalRole:{$comment:"When `true`, this turns a record into `role` that may be used across contexts",type:"boolean"},$contextRole:{$comment:"When `true`, this turns a record into `role` that may be used within a context",type:"boolean"}}},L=RegExp("^[^$].*","u"),X={validate:Y};function Y(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0;if(!e||"object"!=typeof e||Array.isArray(e))return Y.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=o;for(let r in e)if(!("$encryption"===r||"$actions"===r||"$globalRole"===r||"$contextRole"===r||L.test(r)))return Y.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===o){if(void 0!==e.$encryption){let r=e.$encryption,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return Y.errors=[{instancePath:t+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let e=o;for(let e in r)if(!("rootKeyId"===e||"publicKeyJwk"===e))return Y.errors=[{instancePath:t+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"}],!1;if(e===o){if(void 0!==r.rootKeyId){let e=o;if("string"!=typeof r.rootKeyId)return Y.errors=[{instancePath:t+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var n=e===o}else var n=!0;if(n){if(void 0!==r.publicKeyJwk){let e=o;T(r.publicKeyJwk,{instancePath:t+"/$encryption/publicKeyJwk",parentData:r,parentDataProperty:"publicKeyJwk",rootData:a})||(o=(i=null===i?T.errors:i.concat(T.errors)).length);var n=e===o}else var n=!0}}}}var p=s===o}else var p=!0;if(p){if(void 0!==e.$actions){let r=e.$actions,s=o;if(o===s){if(!Array.isArray(r))return Y.errors=[{instancePath:t+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length<1)return Y.errors=[{instancePath:t+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var d=!0;let e=r.length;for(let s=0;s<e;s++){let e=r[s],a=o;if(!(e&&"object"==typeof e&&!Array.isArray(e)))return Y.errors=[{instancePath:t+"/$actions/"+s,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;let n=o,p=!1,h=null,y=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.who&&(r="who")||void 0===e.can&&(r="can")){let e={instancePath:t+"/$actions/"+s,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{let r=o;for(let r in e)if(!("who"===r||"of"===r||"can"===r)){let e={instancePath:t+"/$actions/"+s,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"};null===i?i=[e]:i.push(e),o++;break}if(r===o){if(void 0!==e.who){let r=e.who,a=o;if("string"!=typeof r){let e={instancePath:t+"/$actions/"+s+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}if(!("anyone"===r||"author"===r||"recipient"===r)){let e={instancePath:t+"/$actions/"+s+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:H.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),o++}var m=a===o}else var m=!0;if(m){if(void 0!==e.of){let r=o;if("string"!=typeof e.of){let e={instancePath:t+"/$actions/"+s+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var m=r===o}else var m=!0;if(m){if(void 0!==e.can){let r=e.can,a=o;if("string"!=typeof r){let e={instancePath:t+"/$actions/"+s+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}if(!("delete"===r||"read"===r||"update"===r||"write"===r)){let e={instancePath:t+"/$actions/"+s+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/enum",keyword:"enum",params:{allowedValues:H.properties.$actions.items.oneOf[0].properties.can.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),o++}var m=a===o}else var m=!0}}}}}var c=y===o;c&&(p=!0,h=0);let f=o;if(e&&"object"==typeof e&&!Array.isArray(e)){let r;if(void 0===e.role&&(r="role")||void 0===e.can&&(r="can")){let e={instancePath:t+"/$actions/"+s,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"};null===i?i=[e]:i.push(e),o++}else{if(void 0!==e.role){let r=o;if("string"!=typeof e.role){let e={instancePath:t+"/$actions/"+s+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}var l=r===o}else var l=!0;if(l){if(void 0!==e.can){let r=e.can,a=o;if("string"!=typeof r){let e={instancePath:t+"/$actions/"+s+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"string"},message:"must be string"};null===i?i=[e]:i.push(e),o++}if(!("delete"===r||"query"===r||"read"===r||"update"===r||"write"===r)){let e={instancePath:t+"/$actions/"+s+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/enum",keyword:"enum",params:{allowedValues:H.properties.$actions.items.oneOf[1].properties.can.enum},message:"must be equal to one of the allowed values"};null===i?i=[e]:i.push(e),o++}var l=a===o}else var l=!0}}}var c=f===o;if(c&&p?(p=!1,h=[h,1]):c&&(p=!0,h=1),p)o=n,null!==i&&(n?i.length=n:i=null);else{let e={instancePath:t+"/$actions/"+s,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:h},message:"must match exactly one schema in oneOf"};return null===i?i=[e]:i.push(e),o++,Y.errors=i,!1}var d=a===o;if(!d)break}}}var p=s===o}else var p=!0;if(p){if(void 0!==e.$globalRole){let r=o;if("boolean"!=typeof e.$globalRole)return Y.errors=[{instancePath:t+"/$globalRole",schemaPath:"#/properties/%24globalRole/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var p=r===o}else var p=!0;if(p){if(void 0!==e.$contextRole){let r=o;if("boolean"!=typeof e.$contextRole)return Y.errors=[{instancePath:t+"/$contextRole",schemaPath:"#/properties/%24contextRole/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var p=r===o}else var p=!0;if(p){var h=!0;for(let r in e)if(L.test(r)){let s=o;X.validate(e[r],{instancePath:t+"/"+r.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:r,rootData:a})||(o=(i=null===i?X.validate.errors:i.concat(X.validate.errors)).length);var h=s===o;if(!h)break}}}}}}}return Y.errors=i,0===o}function ee(e,{instancePath:t="",parentData:r,parentDataProperty:s,rootData:a=e}={}){let i=null,o=0;if(!e||"object"!=typeof e||Array.isArray(e))return ee.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r;if(void 0===e.protocol&&(r="protocol")||void 0===e.published&&(r="published")||void 0===e.types&&(r="types")||void 0===e.structure&&(r="structure"))return ee.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:r},message:"must have required property '"+r+"'"}],!1;{let r=o;for(let r in e)if(!("protocol"===r||"published"===r||"types"===r||"structure"===r))return ee.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===o){if(void 0!==e.protocol){let r=o;if("string"!=typeof e.protocol)return ee.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var n=r===o}else var n=!0;if(n){if(void 0!==e.published){let r=o;if("boolean"!=typeof e.published)return ee.errors=[{instancePath:t+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var n=r===o}else var n=!0;if(n){if(void 0!==e.types){let r=e.types,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return ee.errors=[{instancePath:t+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=!0;for(let e in r)if(M.test(e)){let s=r[e],a=o;if(o===a){if(!s||"object"!=typeof s||Array.isArray(s))return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let r=o;for(let r in s)if(!("schema"===r||"dataFormats"===r))return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:r},message:"must NOT have additional properties"}],!1;if(r===o){if(void 0!==s.schema){let r=o;if("string"!=typeof s.schema)return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=r===o}else var d=!0;if(d){if(void 0!==s.dataFormats){let r=s.dataFormats,a=o;if(o===a){if(!Array.isArray(r))return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(r.length<1)return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var m=!0;let s=r.length;for(let a=0;a<s;a++){let s=o;if("string"!=typeof r[a])return ee.errors=[{instancePath:t+"/types/"+e.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+a,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=s===o;if(!m)break}}}var d=a===o}else var d=!0}}}}var p=a===o;if(!p)break}}var n=s===o}else var n=!0;if(n){if(void 0!==e.structure){let r=e.structure,s=o;if(o===s){if(!r||"object"!=typeof r||Array.isArray(r))return ee.errors=[{instancePath:t+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=!0;for(let e in r)if(M.test(e)){let s=o;Y(r[e],{instancePath:t+"/structure/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:r,parentDataProperty:e,rootData:a})||(o=(i=null===i?Y.errors:i.concat(Y.errors)).length);var c=s===o;if(!c)break}}var n=s===o}else var n=!0}}}}}}return ee.errors=i,0===o}let et=Y,er=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.authorization&&(s="authorization")||void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var d=e===p}else var d=!0;if(d){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.definition&&(t="definition"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"definition"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Protocols"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:es.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Configure"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:es.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var m=a===p}else var m=!0;if(m){if(void 0!==s.definition){let e=p;ee(s.definition,{instancePath:r+"/descriptor/definition",parentData:s,parentDataProperty:"definition",rootData:i})||(p=(n=null===n?ee.errors:n.concat(ee.errors)).length);var m=e===p}else var m=!0}}}}}}}var d=a===p}else var d=!0}}}}return e.errors=n,0===p},es={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}},ea=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let n=null,p=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=p;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.authorization){let e=p;o(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(p=(n=null===n?o.errors:n.concat(o.errors)).length);var d=e===p}else var d=!0;if(d){if(void 0!==t.descriptor){let s=t.descriptor,a=p;if(p===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=p;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"filter"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===p){if(void 0!==s.interface){let t=s.interface,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Protocols"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:ei.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.method){let t=s.method,a=p;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Query"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:ei.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===p}else var m=!0;if(m){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=p,i=p;if(p===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var m=a===p}else var m=!0;if(m){if(void 0!==s.filter){let t=s.filter,a=p;if(p===a){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(t).length<1)return e.errors=[{instancePath:r+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let s=p;for(let s in t)if(!("protocol"===s||"recipient"===s))return e.errors=[{instancePath:r+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===p){if(void 0!==t.protocol){let s=p;if("string"!=typeof t.protocol)return e.errors=[{instancePath:r+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=s===p}else var c=!0;if(c){if(void 0!==t.recipient){let s=t.recipient,a=p,i=p;if(p===i){if("string"!=typeof s)return e.errors=[{instancePath:r+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!h.test(s))return e.errors=[{instancePath:r+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}var c=a===p}else var c=!0}}}}var m=a===p}else var m=!0}}}}}}}var d=a===p}else var d=!0}}}}return e.errors=n,0===p},ei={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/did"}}}}}}},eo=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){let o=null,n=0;if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.descriptor&&(s="descriptor"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;{let s=n;for(let s in t)if(!("authorization"===s||"descriptor"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(s===n){if(void 0!==t.authorization){let e=n;f(t.authorization,{instancePath:r+"/authorization",parentData:t,parentDataProperty:"authorization",rootData:i})||(n=(o=null===o?f.errors:o.concat(f.errors)).length);var p=e===n}else var p=!0;if(p){if(void 0!==t.descriptor){let s=t.descriptor,a=n;if(n===a){if(!s||"object"!=typeof s||Array.isArray(s))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let t;if(void 0===s.interface&&(t="interface")||void 0===s.method&&(t="method")||void 0===s.messageTimestamp&&(t="messageTimestamp")||void 0===s.filter&&(t="filter"))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:t},message:"must have required property '"+t+"'"}],!1;{let t=n;for(let t in s)if(!("interface"===t||"method"===t||"messageTimestamp"===t||"filter"===t))return e.errors=[{instancePath:r+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"}],!1;if(t===n){if(void 0!==s.interface){let t=s.interface,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==t)return e.errors=[{instancePath:r+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:en.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.method){let t=s.method,a=n;if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Read"!==t)return e.errors=[{instancePath:r+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:en.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var d=a===n}else var d=!0;if(d){if(void 0!==s.messageTimestamp){let t=s.messageTimestamp,a=n,i=n;if(n===i){if("string"!=typeof t)return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!l.test(t))return e.errors=[{instancePath:r+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var d=a===n}else var d=!0;if(d){if(void 0!==s.filter){let e=n;k(s.filter,{instancePath:r+"/descriptor/filter",parentData:s,parentDataProperty:"filter",rootData:i})||(n=(o=null===o?k.errors:o.concat(k.errors)).length);var d=e===n}else var d=!0}}}}}}}var p=a===n}else var p=!0}}}}return e.errors=o,0===n},en={properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/definitions/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}},ep=k,ed=T,em=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.descriptorCid&&(s="descriptorCid"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;for(let s in t)if(!("descriptorCid"===s||"delegatedGrantId"===s||"permissionsGrantId"===s||"protocolRole"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(void 0!==t.descriptorCid){if("string"!=typeof t.descriptorCid)return e.errors=[{instancePath:r+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.delegatedGrantId){if("string"!=typeof t.delegatedGrantId)return e.errors=[{instancePath:r+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.permissionsGrantId){if("string"!=typeof t.permissionsGrantId)return e.errors=[{instancePath:r+"/permissionsGrantId",schemaPath:"#/properties/permissionsGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.protocolRole){if("string"!=typeof t.protocolRole)return e.errors=[{instancePath:r+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0}}}}return e.errors=null,!0},ec=function e(t,{instancePath:r="",parentData:s,parentDataProperty:a,rootData:i=t}={}){if(!t||"object"!=typeof t||Array.isArray(t))return e.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let s;if(void 0===t.descriptorCid&&(s="descriptorCid")||void 0===t.recordId&&(s="recordId"))return e.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:s},message:"must have required property '"+s+"'"}],!1;for(let s in t)if(!("descriptorCid"===s||"recordId"===s||"contextId"===s||"attestationCid"===s||"encryptionCid"===s||"delegatedGrantId"===s||"permissionsGrantId"===s||"protocolRole"===s))return e.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(void 0!==t.descriptorCid){if("string"!=typeof t.descriptorCid)return e.errors=[{instancePath:r+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.recordId){if("string"!=typeof t.recordId)return e.errors=[{instancePath:r+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.contextId){if("string"!=typeof t.contextId)return e.errors=[{instancePath:r+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.attestationCid){if("string"!=typeof t.attestationCid)return e.errors=[{instancePath:r+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.encryptionCid){if("string"!=typeof t.encryptionCid)return e.errors=[{instancePath:r+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.delegatedGrantId){if("string"!=typeof t.delegatedGrantId)return e.errors=[{instancePath:r+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.permissionsGrantId){if("string"!=typeof t.permissionsGrantId)return e.errors=[{instancePath:r+"/permissionsGrantId",schemaPath:"#/properties/permissionsGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0;if(o){if(void 0!==t.protocolRole){if("string"!=typeof t.protocolRole)return e.errors=[{instancePath:r+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var o=!0}else var o=!0}}}}}}}}return e.errors=null,!0}}}]);